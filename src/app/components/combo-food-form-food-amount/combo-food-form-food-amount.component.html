<ng-container [formGroup]="foodAmountCtrl">
    <mat-card>
        <mat-form-field>
            <!-- Food Name -->
            <mat-label>Food Name</mat-label>
            <input matInput placeholder="Ex. Peanut butter" formControlName="foodName" [matAutocomplete]="foodAC">
            <button mat-button *ngIf="foodAmountCtrl.get('foodName').value" matSuffix mat-icon-button
                (click)="foodAmountCtrl.get('foodName').setValue('')">
                <mat-icon>close</mat-icon>
            </button>
        </mat-form-field>
        <mat-autocomplete autoActiveFirstOption #foodAC="matAutocomplete">
            <mat-option *ngFor="let option of foodACOptions | async" [value]="option.description"
                (onSelectionChange)="updateSelectedFood(option, $event)" class="food-ac-option">
                <div class="description">{{option.description}}</div>
                <div class="brand-owner">{{option.brandOwner}}</div>
            </mat-option>
        </mat-autocomplete>

        <ng-container *ngIf="foodCtrl.value">
            <!-- Amount -->
            <mat-form-field floatLabel="always" class="household-measure-amount">
                <mat-label>Amount</mat-label>
                <input matInput [appMask]="['non-negative', 'float-hundredths']" placeholder="12.5"
                    formControlName="amount">
            </mat-form-field>

            <!-- Unit -->
            <mat-form-field>
                <mat-label>Unit</mat-label>
                <!-- TODO: Add dynamic placeholder that is one of appropriate choices -->
                <!-- TODO add validation for unit being one of autocomplete options -->
                <input matInput placeholder="g" formControlName="unit"
                    [matAutocomplete]="filteredAutocompleteComponent?.matAutocomplete">
                <app-filtered-autocomplete [filterChanges]="foodAmountCtrl.get('unit').valueChanges"
                    [autoCompleteOpts]="unitACOptions"></app-filtered-autocomplete>
            </mat-form-field>
        </ng-container>
    </mat-card>
</ng-container>